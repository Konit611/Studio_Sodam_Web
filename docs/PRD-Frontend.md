# [PRD] AI 기반 개인화 레시피 서비스 — 프론트엔드 (MVP)

## 1. 제품 개요

냉장고 속 재료를 입력하면 AI가 나만의 레시피를 만들어주는 웹 서비스의 프론트엔드.
FastAPI 백엔드 API를 소비하며, 레시피 생성 → 조회 → 관리 플로우를 제공한다.

- **프레임워크**: Next.js 15 (App Router)
- **언어**: TypeScript
- **스타일링**: Tailwind CSS
- **상태 관리**: React Server Components + TanStack Query (클라이언트 상태)
- **백엔드 API**: `{NEXT_PUBLIC_API_URL}/api/v1`

---

## 2. 페이지 구조 및 라우팅

```
/                       → 랜딩(홈) — 재료 입력 + 레시피 생성
/recipes                → 내 레시피 목록
/recipes/[id]           → 레시피 상세
/settings               → 프로필 설정 (알레르기, 숙련도)
```

---

## 3. 기능 요구사항 및 UI/UX 상세

### 3.1 홈 — 레시피 생성 (`/`)

서비스의 핵심 화면. 재료를 입력하고 AI에게 레시피를 요청한다.

**API**: `POST /api/v1/recipes/generate`
```json
// Request
{ "ingredients": ["감자", "양파", "계란"], "preferences": "매콤하게" }

// Response: RecipeRead (id, title, summary, ingredients[], instructions[], ...)
```

**UI 구성**:
```
┌─────────────────────────────────────┐
│  🍳 오늘 뭐 먹지?                    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 재료 입력 (태그 입력)         │    │
│  │ [감자 ×] [양파 ×] [계란 ×]   │    │
│  │ [재료를 입력하세요...      ]  │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 추가 요청사항 (선택)          │    │
│  │ [매콤하게 해주세요           ]│    │
│  └─────────────────────────────┘    │
│                                     │
│        [ 🍽️ 레시피 만들기 ]          │
│                                     │
└─────────────────────────────────────┘
```

**동작**:
- 재료 입력: 텍스트 입력 후 Enter/콤마로 태그 추가, × 버튼으로 제거
- 재료 1~30개, 각 50자 이내, 한글/영문/숫자/기본 기호만 허용 (서버 검증과 동일)
- 추가 요청사항: 자유 텍스트, 최대 500자
- "레시피 만들기" 클릭 시 로딩 상태 표시 (AI 응답 대기, 스켈레톤 or 스피너)
- 생성 완료 시 레시피 상세 페이지(`/recipes/[id]`)로 이동

**UX 고려사항**:
- LLM 응답이 느릴 수 있으므로 로딩 중 "AI가 레시피를 구상하고 있어요..." 같은 안내 문구 표시
- 재료 미입력 시 버튼 비활성화
- 에러 발생 시 토스트 알림

---

### 3.2 내 레시피 목록 (`/recipes`)

생성했던 레시피를 시간순으로 조회한다.

**API**: `GET /api/v1/recipes/?offset=0&limit=20`
```json
// Response: RecipeListItem[]
[
  {
    "id": "uuid",
    "title": "감자 양파 볶음",
    "summary": "간단하고 맛있는...",
    "total_time_minutes": 20,
    "difficulty": "easy",
    "created_at": "2026-02-23T..."
  }
]
```

**UI 구성**:
```
┌─────────────────────────────────────┐
│  내 레시피                           │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 🕐 20분  ·  쉬움             │    │
│  │ 감자 양파 볶음                │    │
│  │ 간단하고 맛있는 한끼 요리...   │    │
│  │                 2월 23일     │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 🕐 30분  ·  보통             │    │
│  │ 김치찌개                     │    │
│  │ 깊은 맛의 김치찌개 레시피...   │    │
│  │                 2월 22일     │    │
│  └─────────────────────────────┘    │
│                                     │
│         [ 더 보기 ]                  │
│                                     │
└─────────────────────────────────────┘
```

**동작**:
- 카드 클릭 시 상세 페이지로 이동
- 무한 스크롤 또는 "더 보기" 버튼으로 페이지네이션 (offset/limit)
- 난이도 표시: `easy` → 쉬움, `medium` → 보통, `hard` → 어려움
- 레시피가 없을 때 빈 상태 UI: "아직 만든 레시피가 없어요. 첫 레시피를 만들어보세요!" + 홈 이동 버튼

---

### 3.3 레시피 상세 (`/recipes/[id]`)

생성된 레시피의 전체 정보를 보여준다.

**API**: `GET /api/v1/recipes/{id}`, `DELETE /api/v1/recipes/{id}`
```json
// Response: RecipeRead
{
  "id": "uuid",
  "title": "감자 양파 볶음",
  "summary": "간단하고 맛있는 한끼 요리입니다.",
  "total_time_minutes": 20,
  "difficulty": "easy",
  "original_prompt": "...",
  "ingredients": [
    { "id": "uuid", "name": "감자", "quantity": "2", "unit": "개" }
  ],
  "instructions": [
    { "id": "uuid", "step_order": 1, "description": "감자 껍질을 벗기고...", "image_url": null }
  ],
  "created_at": "...",
  "updated_at": "..."
}
```

**UI 구성**:
```
┌──────────────────────────────────────┐
│  ← 뒤로                      🗑️     │
│                                      │
│  감자 양파 볶음                       │
│  간단하고 맛있는 한끼 요리입니다.       │
│                                      │
│  🕐 20분   ·   쉬움                  │
│                                      │
│  ── 재료 ──────────────────────      │
│  • 감자  2개                         │
│  • 양파  1개                         │
│  • 식용유  2큰술                      │
│                                      │
│  ── 조리 순서 ─────────────────      │
│  1. 감자 껍질을 벗기고 한입 크기로      │
│     썹니다.                          │
│  2. 팬에 기름을 두르고 양파를 먼저      │
│     볶습니다.                         │
│  3. 감자를 넣고 중불에서 익을 때까지    │
│     볶습니다.                         │
│                                      │
└──────────────────────────────────────┘
```

**동작**:
- 삭제 버튼(🗑️) 클릭 시 확인 다이얼로그 → 삭제 후 목록으로 이동
- 재료: `{name} {quantity}{unit}` 형식으로 표시
- 조리 순서: `step_order` 기준 정렬, 번호 매기기

---

### 3.4 프로필 설정 (`/settings`)

사용자의 알레르기와 요리 숙련도를 설정한다. AI 레시피 생성 시 자동 반영된다.

**API**: `GET /api/v1/users/{id}`, `PATCH /api/v1/users/{id}`
```json
// PATCH Request
{ "allergies": ["땅콩", "새우"], "cooking_skill": "beginner" }

// Response: UserRead
{
  "id": "uuid",
  "email": "user@example.com",
  "allergies": ["땅콩", "새우"],
  "cooking_skill": "beginner",
  "created_at": "...",
  "updated_at": "..."
}
```

**UI 구성**:
```
┌─────────────────────────────────────┐
│  프로필 설정                         │
│                                     │
│  ── 알레르기 / 기피 재료 ──────      │
│  [땅콩 ×] [새우 ×]                  │
│  [추가할 재료를 입력하세요...    ]    │
│  최대 20개, 각 30자 이내             │
│                                     │
│  ── 요리 숙련도 ───────────────      │
│  (●) 입문    요리를 거의 안 해봤어요  │
│  ( ) 중급    기본적인 요리는 가능해요  │
│  ( ) 고급    다양한 요리에 자신 있어요 │
│                                     │
│           [ 저장하기 ]               │
│                                     │
└─────────────────────────────────────┘
```

**동작**:
- 알레르기: 태그 입력 (홈의 재료 입력과 동일한 컴포넌트), 최대 20개, 항목당 30자
- 숙련도: 라디오 버튼 (`beginner` / `intermediate` / `advanced`)
- 저장 성공 시 토스트 알림
- 변경사항 없으면 저장 버튼 비활성화

---

## 4. 공통 레이아웃

```
┌─────────────────────────────────────┐
│  Sodam Recipe                       │
│                                     │
│  [ 페이지 콘텐츠 ]                   │
│                                     │
├─────────────────────────────────────┤
│  🏠 홈    📋 레시피    ⚙️ 설정       │
└─────────────────────────────────────┘
```

- **헤더**: 서비스명 (모바일에서는 최소화)
- **하단 네비게이션**: 모바일 퍼스트, 3탭 (홈/레시피/설정)
- **데스크탑**: 하단 네비게이션 → 좌측 사이드바 또는 상단 네비게이션으로 전환
- **반응형 브레이크포인트**: `sm:640px`, `md:768px`, `lg:1024px`

---

## 5. 디자인 시스템

### 5.1 색상
| 토큰 | 용도 | 값 |
|------|------|----|
| `primary` | CTA 버튼, 강조 | 따뜻한 오렌지 계열 |
| `background` | 페이지 배경 | 밝은 크림/화이트 |
| `surface` | 카드, 입력필드 | 화이트 |
| `text-primary` | 본문 텍스트 | 다크 그레이 |
| `text-secondary` | 부가 정보 | 미디엄 그레이 |
| `danger` | 삭제, 에러 | 레드 계열 |

### 5.2 타이포그래피
- 제목: `text-xl font-bold` (레시피 제목)
- 본문: `text-base` (설명, 조리 단계)
- 캡션: `text-sm text-secondary` (시간, 난이도, 날짜)

### 5.3 공통 컴포넌트
| 컴포넌트 | 사용처 |
|----------|--------|
| `TagInput` | 재료 입력 (홈), 알레르기 입력 (설정) |
| `RecipeCard` | 레시피 목록 카드 |
| `DifficultyBadge` | 난이도 표시 (easy/medium/hard) |
| `LoadingSpinner` | API 호출 대기 |
| `ConfirmDialog` | 삭제 확인 |
| `Toast` | 성공/에러 알림 |
| `EmptyState` | 데이터 없음 안내 |

---

## 6. API 연동 명세

프론트엔드가 호출하는 백엔드 API 전체 목록.

| 화면 | Method | Endpoint | 용도 |
|------|--------|----------|------|
| 홈 | `POST` | `/api/v1/recipes/generate` | AI 레시피 생성 |
| 목록 | `GET` | `/api/v1/recipes/?offset=0&limit=20` | 내 레시피 목록 |
| 상세 | `GET` | `/api/v1/recipes/{id}` | 레시피 상세 조회 |
| 상세 | `DELETE` | `/api/v1/recipes/{id}` | 레시피 삭제 |
| 설정 | `GET` | `/api/v1/users/{id}` | 유저 프로필 조회 |
| 설정 | `PATCH` | `/api/v1/users/{id}` | 프로필 업데이트 |

---

## 7. 에러 처리

| HTTP 상태 | 상황 | 프론트엔드 대응 |
|-----------|------|---------------|
| `400` | 입력값 검증 실패 | 필드별 에러 메시지 표시 |
| `404` | 레시피/유저 없음 | "찾을 수 없습니다" 페이지 |
| `409` | 이메일 중복 | "이미 등록된 이메일입니다" 토스트 |
| `500` | 서버 에러 | "잠시 후 다시 시도해주세요" 토스트 |
| 네트워크 에러 | 연결 불가 | "네트워크 연결을 확인해주세요" 토스트 |

---

## 8. 기술적 고려사항

- **모바일 퍼스트**: 모든 UI를 모바일(375px) 기준으로 설계한 뒤 데스크탑으로 확장
- **서버 컴포넌트 우선**: 목록/상세 페이지는 RSC로 초기 데이터 fetch, 인터랙션이 필요한 부분만 Client Component
- **낙관적 업데이트**: 삭제 시 즉시 UI 반영 후 API 호출 (실패 시 롤백)
- **환경 변수**: `NEXT_PUBLIC_API_URL`만 public, 나머지 서버 사이드 전용

---

## 9. 성공 지표

- 레시피 생성 완료율 (재료 입력 → 결과 확인까지 이탈 없이 완료한 비율)
- 평균 재료 입력 개수 (사용자가 몇 개의 재료를 입력하는지)
- 레시피 목록 재방문율 (생성 후 다시 돌아와서 확인하는 비율)
- 페이지 로드 시간 (LCP 2.5초 이내 목표)
